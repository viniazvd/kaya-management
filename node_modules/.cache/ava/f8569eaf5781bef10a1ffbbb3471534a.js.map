{"version":3,"sources":["auth.test.js"],"names":["require","config","isValid","test","models","beforeEach","t","user","destroy","truncate","after","always","serial","name","email","password","newUser","build","result","save","is","dataValues","isMatch"],"mappings":";;AAAAA,QAAQ,QAAR,EAAkBC,MAAlB;;AAEA,MAAMC,UAAUF,QAAQ,oCAAR,CAAhB;AACA,MAAMG,OAAOH,QAAQ,KAAR,CAAb;AACA,MAAMI,SAASJ,QAAQ,iCAAR,CAAf;;AAEAG,KAAKE,UAAL,CAAgBC,KAAKF,OAAOG,IAAP,CAAYC,OAAZ,CAAoB,EAACC,UAAU,IAAX,EAApB,CAArB;AACAN,KAAKO,KAAL,CAAWC,MAAX,CAAkBL,KAAKF,OAAOG,IAAP,CAAYC,OAAZ,CAAoB,EAACC,UAAU,IAAX,EAApB,CAAvB;;AAEAN,KAAKS,MAAL,CAAY,QAAZ,EAAsB,MAAMN,CAAN,IAAW;AAC/B,QAAMC,OAAO,EAAEM,MAAM,UAAR,EAAoBC,OAAO,qBAA3B,EAAkDC,UAAU,KAA5D,EAAb;AACA,QAAMC,UAAU,MAAMZ,OAAOG,IAAP,CAAYU,KAAZ,CAAkBV,IAAlB,CAAtB;AACA,QAAMW,SAAS,MAAMF,QAAQG,IAAR,EAArB;;AAEAb,IAAEc,EAAF,CAAKF,OAAOG,UAAP,CAAkBP,KAAvB,EAA8B,qBAA9B;AACD,CAND;;AAQAX,KAAKS,MAAL,CAAY,QAAZ,EAAsB,MAAMN,CAAN,IAAW;AAC/B,QAAMC,OAAO,EAAEM,MAAM,UAAR,EAAoBC,OAAO,qBAA3B,EAAkDC,UAAU,KAA5D,EAAb;AACA,QAAMC,UAAU,MAAMZ,OAAOG,IAAP,CAAYU,KAAZ,CAAkBV,IAAlB,CAAtB;AACA,QAAMW,SAAS,MAAMF,QAAQG,IAAR,EAArB;;AAEA,QAAMG,UAAU,MAAMpB,QAAQ,KAAR,EAAeK,KAAKQ,QAApB,CAAtB;;AAEAT,IAAEc,EAAF,CAAKF,OAAOG,UAAP,CAAkBP,KAAvB,EAA8B,qBAA9B;AACAR,IAAEc,EAAF,CAAKE,OAAL,EAAc,KAAd;AACD,CATD","file":"auth.test.js","sourcesContent":["require('dotenv').config()\n\nconst isValid = require('../../../support/compare-passwords')\nconst test = require('ava')\nconst models = require('../../../infra/sequelize/models')\n\ntest.beforeEach(t => models.user.destroy({truncate: true}))\ntest.after.always(t => models.user.destroy({truncate: true}))\n\ntest.serial('signup', async t => {\n  const user = { name: 'vinitest', email: 'emailtest@gmail.com', password: '123' }\n  const newUser = await models.user.build(user)\n  const result = await newUser.save()\n\n  t.is(result.dataValues.email, 'emailtest@gmail.com')\n})\n\ntest.serial('signin', async t => {\n  const user = { name: 'vinitest', email: 'emailtest@gmail.com', password: '123' }\n  const newUser = await models.user.build(user)\n  const result = await newUser.save()\n\n  const isMatch = await isValid('123', user.password)\n\n  t.is(result.dataValues.email, 'emailtest@gmail.com')\n  t.is(isMatch, false)\n})\n"]}